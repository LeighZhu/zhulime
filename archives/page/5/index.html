<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	
	<title>第 5 页 | 归档 | Leigh:// 斯路</title>
	<meta name="author" content="Leigh Zhu">
	
	<meta name="description" content="Personal Blog">
	
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	
	<meta property="og:site_name" content="Leigh:// 斯路"/>

	
		<meta property="og:image" content="undefined"/>
	

	<link href="/favicon.png" rel="icon">
	<link rel="alternate" href="/atom.xml" title="Leigh:// 斯路" type="application/atom+xml">
	<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
	
	<style>
	html {
		filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);
		-webkit-filter: grayscale(1);
	}
	</style>
</head>


<body>
	<div id="stick">
		<header id="header"><hgroup>
	<h1><a href="/">Leigh:// 斯路</a></h1>
	<h2>行于斯路…</h2>
</hgroup>
<nav id="header-nav" class="clearfix">
	<ul>
		
			<li><a href="/">Home</a></li>
		
			<li><a href="/archives">Archives</a></li>
		
	</ul>
</nav>
<nav id="ext-nav" class="clearfix">
	<ul>
		
	</ul>
</nav></header>
		<footer id="footer"><p class="copy">
	
	&copy; 2013 Leigh Zhu
	
</p></footer>
	</div>
	<div id="wrapper" class="clearfix">
		<div id="content">
<h2 class="archive-title">归档</h2>


  
    <article class="post">
	
	<div class="post-content">
		<header>
			
  
    <h1 class="title"><a href="/2012/07/11/js-exclamation-mark-before-function/">JavaScript 中在 function() {} 前面加感叹号的作用</a></h1>
  

			
				<time datetime="2012-07-11T08:48:54.000Z">2012 Jul 11</time>
			
		</header>
		<div class="entry">
			
				<p>闲着无聊想去看看 Twitter 的 Bootstrap： <a href="https://github.com/twitter/bootstrap">https://github.com/twitter/bootstrap</a></p>
<p>翻看他们的 js ，发现他们代码中有很多类似于如下的情形：</p>
<pre><code>!function ($) {
    //do sth
}(window.jQuery);
`<span class="tag">&lt;/<span class="title">pre</span>&gt;</span>

很奇怪的发现他们在 function 前面加上了感叹号，但往下看到结尾部分的代码 (window.jQuery) 似乎明白了点什么，于是去 stackoverflow 上搜了下。

果然有很多人提过这个问题，这里放出一个： [What does the exclamation mark do before the function?](http://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)

正如之前所想，其加上了 ！ 的作用，即将前面的匿名函数 

function ($) {}  这是一个函数的声明，当我们需要让它立即执行，就需要使用 （） 操作符将函数调用，而  () 操作符需要前面是一个表达式，通常，我们会使用一对圆括号将匿名函数声明转换成表达式。所以，我们通常是这么写的：

<span class="tag">&lt;<span class="title">pre</span>&gt;</span>`(function () {}) ()`<span class="tag">&lt;/<span class="title">pre</span>&gt;</span>

那么，其实，最后的括号是用来执行函数的，我们只要保证它前面是个结果是个函数的表达式就可以了。那么，其实， js 中很多操作符，我们都可以使用，如 [JavaScript 秘密花园](http://bonsaiden.github.com/JavaScript-Garden/zh/#function.scopes) 中所说，我们可以写成这个样子：

<span class="tag">&lt;<span class="title">pre</span>&gt;</span>`+function(){}();
(function(){}());`<span class="tag">&lt;/<span class="title">pre</span>&gt;</span>

当然，理论上也是可以这么写的：

<span class="tag">&lt;<span class="title">pre</span>&gt;</span>`-function(){}();
~function(){}();`<span class="tag">&lt;/<span class="title">pre</span>&gt;</span>

至于为什么可以这么做呢，那是因为 () 操作符比 ! 操作符的优先级要高两级，[参见 MDN](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)

所以如果是这么一段代码：

<span class="tag">&lt;<span class="title">pre</span>&gt;</span>`!function () {
    return false;
} ()
</code></pre>
<p>执行过程便是，函数返回 false 然后取反，变为 true 。</p>
<p>那么，问题又来了，我们该选哪种写法呢？ 为什么用 ! 不用 + 呢？
看到 <a href="http://www.swordair.com/blog/2011/10/714/">葵中剑</a> 跑过测试，我也去跑了几次，但是结果参差不齐，不知道有没有参考意义。</p>
<p>不过，从感官上来说， ! 相比 (...) 不仅减少了一个字符（当然这个效果应该不明显），而且使得代码更加易读，手头没有智能点的编辑器的话，也不用费劲去找括号的对应了，再书写代码时候，一个 ! 总比 (...) 出错的概率小了</p>

			
		</div>
		<footer>
			
				
					<div class="alignleft">
						<a href="/2012/07/11/js-exclamation-mark-before-function/#more" class="more-link">Read More</a>
					</div>
				
				

			
		</footer>
	</div>
</article>


  
    <article class="post">
	
	<div class="post-content">
		<header>
			
  
    <h1 class="title"><a href="/2012/07/02/intern-1/">实习日志.1</a></h1>
  

			
				<time datetime="2012-07-02T13:41:50.000Z">2012 Jul 2</time>
			
		</header>
		<div class="entry">
			
				<p>今天去 NTES.HZ 报到了，接应还做的挺好的。依然是当时面试的那幢楼，后来才知道，HR 和 WD 是在同一幢楼。</p>
<p>一位姐姐带着我们填协议，神马实习协议啊，什么登记表啊，什么政府的见习 XX 表啊。。。什么保险证明啦。。。。一共有九份，厚厚一叠咧。发现研究生真多啊，浙大的真多啊。。。</p>
<p>然后发了工牌，姐姐说丢了要去买的，100 块。。。 :ali 大汗:</p>
<p>写完似乎都十点多了，然后等着各部门把我们带走。。。</p>
<p>然后差不多十一点半，俺被领走了。</p>
<p>后来，O.C. 的带领下，去领了电脑，配置定挺低端，显示器不错，嘿嘿。</p>
<p>然后去次饭，食堂没有想象中的大，但是比想象中的好吃。 :bed 啦啦啦:</p>
<p>下午刚好有分享会，组内两个前辈分享了很深奥的东西，结束的时候，差不多三点半了。</p>
<p>回去装了些软件。</p>
<p>然后 O.C. 把我的内部帐号发给了我，差不多是部署完毕了。</p>
<p>一起吃了晚饭，然后就下班咯～ :bed 转圈:</p>

			
		</div>
		<footer>
			
				
					<div class="alignleft">
						<a href="/2012/07/02/intern-1/#more" class="more-link">Read More</a>
					</div>
				
				

			
		</footer>
	</div>
</article>


  
    <article class="post">
	
	<div class="post-content">
		<header>
			
  
    <h1 class="title"><a href="/2012/05/18/recent/">好吧，最近挺忙的</a></h1>
  

			
				<time datetime="2012-05-18T13:01:21.000Z">2012 May 18</time>
			
		</header>
		<div class="entry">
			
				<p>其实我并不想让这个博客沦为一个技术博，如果哪天技术文太多了，我会考虑分离的。</p>
<p>挺想写篇文章来更一更，以免再度沦为姨妈博，无奈最近太折腾，完全没有时间，也没有想法。</p>
<p>好吧，说说这些日子的事情。</p>
<p>其实从 4 月中旬到五月中旬，一直沦陷于各种面试中。</p>
<p>现在终于松一口气了，然后期末了。</p>
<p>3 门组织的考试，1 门实验课，2 门考察课。</p>
<p>努力一下，顺利搞定吧。</p>
<p>美好的暑假在等待着我。 :ali 啊啊啊:</p>
<p>PS：其实是不是真的美好，我也不知道诶。。。。。。不过，</p>
<p>终于是踏出了前端这条路的第一步。 :bed 奔跑:</p>

			
		</div>
		<footer>
			
				
					<div class="alignleft">
						<a href="/2012/05/18/recent/#more" class="more-link">Read More</a>
					</div>
				
				

			
		</footer>
	</div>
</article>


  

  <nav id="pagination" class="clearfix">
  
    <a href="/archives/page/4/" class="alignleft prev">上一页</a>
  
  
    <a href="/archives/page/6/" class="alignright next">下一页</a>
  
</nav>
</div>
		<aside id="widget" class="clearfix">		
			
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/Blog-fix/">Blog-fix</a><small>11</small></li>
  
    <li><a href="/categories/Codex/">Codex</a><small>8</small></li>
  
    <li><a href="/categories/Blog-fix/Codex/">Codex</a><small>1</small></li>
  
    <li><a href="/categories/Life/">Life</a><small>78</small></li>
  
    <li><a href="/categories/Tutor/">Tutor</a><small>18</small></li>
  
    <li><a href="/categories/Codex/Tutor/">Tutor</a><small>1</small></li>
  
    <li><a href="/categories/Life/Uncategorized/">Uncategorized</a><small>4</small></li>
  
    <li><a href="/categories/Uncategorized/">Uncategorized</a><small>15</small></li>
  
    <li><a href="/categories/Vision/">Vision</a><small>40</small></li>
  
  </ul>
</div>

		
			
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/GTD/" style="font-size: 16.25px;">GTD</a><a href="/tags/PKM/" style="font-size: 15.50px;">PKM</a><a href="/tags/QQ/" style="font-size: 15.25px;">QQ</a><a href="/tags/cctv/" style="font-size: 15.00px;">cctv</a><a href="/tags/javascript/" style="font-size: 16.00px;">javascript</a><a href="/tags/meme/" style="font-size: 14.75px;">meme</a><a href="/tags/twitter/" style="font-size: 17.50px;">twitter</a><a href="/tags/世博/" style="font-size: 11.50px;">世博</a><a href="/tags/分享/" style="font-size: 13.00px;">分享</a><a href="/tags/前端/" style="font-size: 11.25px;">前端</a><a href="/tags/博客维护/" style="font-size: 19.00px;">博客维护</a><a href="/tags/参观/" style="font-size: 11.75px;">参观</a><a href="/tags/团队/" style="font-size: 12.50px;">团队</a><a href="/tags/图书/" style="font-size: 13.75px;">图书</a><a href="/tags/备份/" style="font-size: 13.50px;">备份</a><a href="/tags/学习/" style="font-size: 17.75px;">学习</a><a href="/tags/思路/" style="font-size: 14.00px;">思路</a><a href="/tags/总结/" style="font-size: 16.50px;">总结</a><a href="/tags/感想/" style="font-size: 19.50px;">感想</a><a href="/tags/手机/" style="font-size: 15.75px;">手机</a><a href="/tags/斯路/" style="font-size: 12.25px;">斯路</a><a href="/tags/旅游/" style="font-size: 12.00px;">旅游</a><a href="/tags/旅途/" style="font-size: 13.25px;">旅途</a><a href="/tags/日记/" style="font-size: 19.75px;">日记</a><a href="/tags/日食/" style="font-size: 10.50px;">日食</a><a href="/tags/春节/" style="font-size: 18.25px;">春节</a><a href="/tags/格莱美/" style="font-size: 10.00px;">格莱美</a><a href="/tags/榜单/" style="font-size: 10.25px;">榜单</a><a href="/tags/气场/" style="font-size: 12.75px;">气场</a><a href="/tags/网络/" style="font-size: 14.50px;">网络</a><a href="/tags/聚会/" style="font-size: 11.00px;">聚会</a><a href="/tags/节日/" style="font-size: 18.75px;">节日</a><a href="/tags/观测/" style="font-size: 10.75px;">观测</a><a href="/tags/视频/" style="font-size: 18.00px;">视频</a><a href="/tags/计划/" style="font-size: 17.25px;">计划</a><a href="/tags/译文/" style="font-size: 17.00px;">译文</a><a href="/tags/读后感/" style="font-size: 14.25px;">读后感</a><a href="/tags/资源/" style="font-size: 16.75px;">资源</a><a href="/tags/软件/" style="font-size: 18.50px;">软件</a><a href="/tags/音乐/" style="font-size: 19.25px;">音乐</a>
  </div>
</div>

		
			<div class="widget blogroll">
  <h3 class="title">友情链接</h3>	
	<ul>
		
			<li><a href="http://zhuli.me">Leigh</a></li>
		
			<li><a href="http://zoechan.me">Zoe</a></li>
		
			<li><a href="http://test">Test</a></li>
		
	</ul>
</div>
		
</aside>
	</div>
	<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jsemoticon.js"></script>



<script type="text/javascript">
var duoshuoQuery = {short_name:"zhulime"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>